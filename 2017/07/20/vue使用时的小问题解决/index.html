<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  
  
  
    <meta name="description" content="前端,Hexo,技术">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    vue使用时遇到的小问题及解决 |
    
    JL&#39;s Blog</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>
</html>
<body>
<main class="content">
  <section class="outer">
  <article id="post-vue使用时的小问题解决" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

    <div class="article-inner">
        
            <header class="article-header">
                
  
    <h1 class="article-title" itemprop="name">
      vue使用时遇到的小问题及解决
    </h1>
  
  




            </header>
            

                
                    <div class="article-meta">
                        <a href="/2017/07/20/vue使用时的小问题解决/" class="article-date">
  <time datetime="2017-07-20T13:30:15.000Z" itemprop="datePublished">2017-07-20</time>
</a>
                            
  <div class="article-category">
    <a class="article-category-link" href="/categories/技术/">技术</a>
  </div>

                    </div>
                    

                        
                            
    <div class="tocbot"></div>





                                

                                    <div class="article-entry" itemprop="articleBody">
                                        


                                            

                                                
                                                                    <p>现在已经是2018年的1月20号了，从2017年7月20号左右开始用vue做东西，差不多半年的时间做了两个项目，一个移动端，一个PC端，第一个项目真的是文档大概浏览一下就直接上手干了，刚开始感觉有点儿艰难，不过熟悉之后觉得vue的开发体验简直太棒了，<a id="more"></a>所以第二个项目也果断选择了vue开发，现在项目第一个阶段已经初步完成马上测试了，感觉选择vue真是太对了，虽然也遇到很多问题，但整体开发过程都很顺畅。从这篇文章也可以看出从最开始的小白一点儿点儿学习进步吧，这些问题在发生的时候都是真真实实的给我造成了一些问题，所以解决后选择记录下来，但现在回过头来看发现其实这些都是很小的一些问题，有粗心造成，有因为对vue-cli一知半解闹的笑话，有在提交代码时跟团队另一个前端代码冲突发生的一些小问题，有使用各种组件时遇见的坑，还有在业务场景中遇见的一些小需求的解决过程，半年里所有的这些都是自己去学习尝试去解决，公司里没有前端这方面的人可以带带我，所以也是自己在琢磨，希望新的一年不仅要知道如何使用vue，更要去学习vue的原理是什么，只要还在用vue，这篇文章就会一直更新下去，加油吧我自己。    —2018.1.20有感</p>
<p>最近的在使用vue做东西，初次使用遇见很多问题，把这些小问题记录下来，希望给遇到同样问题的同学一个参考，也便于自己以后查阅，持续更新中。<br><!--more--></p>
<h4 id="1-vue-cli构建的项目端口冲突"><a href="#1-vue-cli构建的项目端口冲突" class="headerlink" title="1.vue-cli构建的项目端口冲突"></a>1.vue-cli构建的项目端口冲突</h4><p>报错：Error: listen EADDRINUSE :::8080 错误原因是端口冲突，修改当前项目的端口即可，在项目下的config/index.js文件中修改</p>
<pre class=" language-javascript"><code class="language-javascript">  dev<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    env<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./dev.env'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    port<span class="token punctuation">:</span> <span class="token number">8081</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//修改端口号</span>
    autoOpenBrowser<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    assetsSubDirectory<span class="token punctuation">:</span> <span class="token string">'static'</span><span class="token punctuation">,</span>
    assetsPublicPath<span class="token punctuation">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    proxyTable<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    cssSourceMap<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
</code></pre>
<h4 id="2-解决在vue-cli构建的项目中无法使用stylus的问题"><a href="#2-解决在vue-cli构建的项目中无法使用stylus的问题" class="headerlink" title="2.解决在vue-cli构建的项目中无法使用stylus的问题"></a>2.解决在vue-cli构建的项目中无法使用stylus的问题</h4><p>报错：Module build failed: Error: Cannot find module ‘stylus’<br>解决：</p>
<h5 id="2-1-首先在package-json的devDependencies中写入依赖"><a href="#2-1-首先在package-json的devDependencies中写入依赖" class="headerlink" title="2.1 首先在package.json的devDependencies中写入依赖"></a>2.1 首先在package.json的devDependencies中写入依赖</h5><pre class=" language-javascript"><code class="language-javascript"><span class="token string">"stylus-loader"</span><span class="token punctuation">:</span> <span class="token string">"^2.1.2"</span><span class="token punctuation">,</span>
<span class="token string">"stylus"</span><span class="token punctuation">:</span> <span class="token string">"^0.52.4"</span><span class="token punctuation">,</span>
</code></pre>
<h5 id="2-2-安装这两个插件"><a href="#2-2-安装这两个插件" class="headerlink" title="2.2 安装这两个插件"></a>2.2 安装这两个插件</h5><pre><code>npm i stylus-loader stylus --save
</code></pre><p>或者直接在项目文件夹下<br>    npm install</p>
<h5 id="2-3-重新编译运行"><a href="#2-3-重新编译运行" class="headerlink" title="2.3 重新编译运行"></a>2.3 重新编译运行</h5><pre><code>npm run dev
</code></pre><h4 id="3-运行后一片空白，chrome控制台报错"><a href="#3-运行后一片空白，chrome控制台报错" class="headerlink" title="3.运行后一片空白，chrome控制台报错"></a>3.运行后一片空白，chrome控制台报错</h4><p>报错：Uncaught TypeError: <strong>WEBPACK_IMPORTED_MODULE_2</strong>router__.a is not a constructor<br>描述：在使用vue-router时出现了这个问题,在网上搜索后发现是版本不同导致的问题，在vue2.x中使用了1.0的vue-router的写法，<br>在vue1.0中:<br>    <a v-link="{path:'/goods'}">商品</a><br>修改为vue2.0中的写法:<br>    <router-link to="/goods">商品</router-link></p>
<h4 id="4-配置默认路径"><a href="#4-配置默认路径" class="headerlink" title="4.配置默认路径"></a>4.配置默认路径</h4><p>没有进行配置时，引用组件只能通过下面的方式<br>    import Goods from ‘../components/goods/goods’;<br>并且’../‘写多了也很烦人，如果不加’../‘会报一下错误：<br>报错：Module not found: Error: Can’t resolve ‘components/goods/goods’ in ‘F:\vuetest\vue-project\src\router’<br>为此我们可以配置默认路径来解决这个问题。<br>1.找到build文件夹下的webpack.base.conf.js文件<br>2.在文件中找到这一段代码:</p>
<pre class=" language-javascript"><code class="language-javascript">resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'vue$'</span><span class="token punctuation">:</span> <span class="token string">'vue/dist/vue.esm.js'</span><span class="token punctuation">,</span>
      <span class="token string">'@'</span><span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>alias是别名的意思，我们可以为常用的路径起一个别名,如下面这样</p>
<pre class=" language-javascript"><code class="language-javascript">resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'vue$'</span><span class="token punctuation">:</span> <span class="token string">'vue/dist/vue.esm.js'</span><span class="token punctuation">,</span>
      <span class="token string">'@'</span><span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token string">'components'</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../src/components'</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<p>在修改完成后要重新运行，才能生效，现在页面中的<code>import Goods from &#39;components/goods/goods&#39;;</code>应该就可以了。</p>
<p>补充：这样配置的路径只在script标签中有效，也就是只能在js中用。</p>
<h4 id="5-使用v-for在获取computed中的值时出现的问题"><a href="#5-使用v-for在获取computed中的值时出现的问题" class="headerlink" title="5.使用v-for在获取computed中的值时出现的问题"></a>5.使用v-for在获取computed中的值时出现的问题</h4><p>报错：xxx is not defined on the instance but referenced during render.Make sure to declare reactive data properties in the data option.<br>这个问题犯得很不应该，错把computed属性写在了props属性中，导致vue找不到computed中定义的计算函数，是个低级错误，不多说了。</p>
<h4 id="6-在vue中实现左右滑动切换"><a href="#6-在vue中实现左右滑动切换" class="headerlink" title="6.在vue中实现左右滑动切换"></a>6.在vue中实现左右滑动切换</h4><p>watch路由变化，当路由发生改变时，根据地址中’/‘的数量来判断当前路由地址的深浅，以此决定要左滑还是右滑</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        transitionName <span class="token punctuation">:</span><span class="token string">'slide-left'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//绑定在组件上面的动效class</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  watch<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'$route'</span> <span class="token punctuation">(</span>to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">const</span> toDepth <span class="token operator">=</span> to<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
        <span class="token keyword">const</span> fromDepth <span class="token operator">=</span> <span class="token keyword">from</span><span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
        <span class="token keyword">this</span><span class="token punctuation">.</span>transitionName <span class="token operator">=</span> toDepth <span class="token operator">&lt;</span> fromDepth <span class="token operator">?</span> <span class="token string">'vux-pop-out'</span> <span class="token punctuation">:</span> <span class="token string">'vux-pop-in'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class=" language-css"><code class="language-css">&lt;style lang=<span class="token string">"stylus"</span> rel=<span class="token string">"stylesheet/stylus"</span>>
  <span class="token comment" spellcheck="true">/* 左右滑动 */</span>
<span class="token number">.</span>vux-pop-out-enter-active,
<span class="token number">.</span>vux-pop-out-leave-active,
<span class="token number">.</span>vux-pop-in-enter-active,
<span class="token number">.</span>vux-pop-in-leave-active 
 <span class="token property">will-change</span><span class="token punctuation">:</span> transform
 <span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">350</span>ms
 <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span>
 <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span>
 <span class="token property">position</span><span class="token punctuation">:</span> absolute
 <span class="token property">backface-visibility</span><span class="token punctuation">:</span> hidden
 <span class="token property">perspective</span><span class="token punctuation">:</span> <span class="token number">1000</span>
<span class="token number">.</span>vux-pop-out-enter
 <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0</span>
 <span class="token property">transform</span><span class="token punctuation">:</span> translate<span class="token number">3</span><span class="token function">d</span><span class="token punctuation">(</span>-<span class="token number">100%</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">.</span>vux-pop-out-leave-active
 <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0</span>
 <span class="token property">transform</span><span class="token punctuation">:</span> translate<span class="token number">3</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">100%</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token property">transform-style</span><span class="token punctuation">:</span> preserve-<span class="token number">3</span>d<span class="token punctuation">;</span>
<span class="token number">.</span>vux-pop-in-enter
 <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0</span>
 <span class="token property">transform</span><span class="token punctuation">:</span> translate<span class="token number">3</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">100%</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token property">transform-style</span><span class="token punctuation">:</span> preserve-<span class="token number">3</span>d<span class="token punctuation">;</span>
<span class="token number">.</span>vux-pop-in-leave-active
 <span class="token property">opacity</span><span class="token punctuation">:</span> <span class="token number">0</span>
 <span class="token property">transform</span><span class="token punctuation">:</span> translate<span class="token number">3</span><span class="token function">d</span><span class="token punctuation">(</span>-<span class="token number">100%</span>, <span class="token number">0</span>, <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token property">transform-style</span><span class="token punctuation">:</span> preserve-<span class="token number">3</span>d<span class="token punctuation">;</span>
&lt;/style>
</code></pre>
<h4 id="7-在keep-alive中只更新某个组件的数据"><a href="#7-在keep-alive中只更新某个组件的数据" class="headerlink" title="7.在keep-alive中只更新某个组件的数据"></a>7.在keep-alive中只更新某个组件的数据</h4><p>我有一个列表，点击列表的项可以打开详情页，在我没有使用keep-alive时，一切正常，我点击某一项，详情页中显示的是当前项的数据，不过在使用keep-alive进行组件缓存后就出事了，我不管点击哪一项总是会打开第一次缓存的详情组件，数据也不会改变，我是通过vue-router传参到详情页面的:</p>
<pre class=" language-javascript"><code class="language-javascript">taskDetail<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token punctuation">:</span><span class="token string">'/task/detail'</span><span class="token punctuation">,</span>query<span class="token punctuation">:</span><span class="token punctuation">{</span>item<span class="token punctuation">:</span>item<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>查看官方文档，发现下面这段话：</p>
<blockquote>
<p>在 2.2.0 及其更高版本中，activated 和 deactivated 将会在 <keep-alive> 树内的所有嵌套组件中触发。</keep-alive></p>
</blockquote>
<p>那么我只要每次在activated中做数据更新就行了，如下：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>item <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>item<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="8-使用better-scroll时列表不滚动的问题"><a href="#8-使用better-scroll时列表不滚动的问题" class="headerlink" title="8.使用better-scroll时列表不滚动的问题"></a>8.使用better-scroll时列表不滚动的问题</h4><p>有必要先了解一下better-scroll的原理,下面的链接中讲的非常清楚：<br><a href="https://juejin.im/post/59300b2e2f301e006bcdd91c" target="_blank" rel="noopener">better-scroll</a><br>也就是说滚动列表的父元素要有一个固定的高度，只有这样滚动列表的高度超过父元素的高度是列表才会滚动，不超过时就不滚动，总之在better-scroll的引入和写法没错的情况下还不能滚动，那大多数原因就是css的样式没写对，导致不符合better-scroll滚动的条件，那来看一个非常简单的例子吧,主要是css部分：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">></span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"parent"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"child_div"</span> ref<span class="token operator">=</span><span class="token string">"wrapper"</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>ul<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">...</span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">299</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">300</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">></span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/ecmascritp-6"</span><span class="token operator">></span>
  <span class="token keyword">import</span> BScroll <span class="token keyword">from</span> <span class="token string">'better-scroll'</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    created <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>wrapper<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span>style scoped<span class="token operator">></span>
<span class="token punctuation">.</span>parent<span class="token punctuation">{</span>
  position<span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  top<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  bottom<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  width<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>child_div<span class="token punctuation">{</span>
  position<span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  height<span class="token punctuation">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
  overflow<span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">.</span>child_div li<span class="token punctuation">{</span>
  height<span class="token punctuation">:</span>20vw<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
</code></pre>
<h4 id="9-better-scroll中警告-Intervention-Unable-to-preventDefault-inside-passive-event-listener-due-to-target-being-treated-as-passive"><a href="#9-better-scroll中警告-Intervention-Unable-to-preventDefault-inside-passive-event-listener-due-to-target-being-treated-as-passive" class="headerlink" title="9.better-scroll中警告[Intervention] Unable to preventDefault inside passive event listener due to target being treated as passive"></a>9.better-scroll中警告[Intervention] Unable to preventDefault inside passive event listener due to target being treated as passive</h4><p>这个警告信息是因为在新版的chrome中监听touch类事件时，无法被动侦听事件preventDefault造成的，在better-scroll中暂时解决的方法是在初始化better-scroll时设置preventDefault: false</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BScroll</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>wrapper<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  preventDefault<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//暂时解决chrome中无法被动监听preventdefault</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="10-只在一级菜单显示底部导航"><a href="#10-只在一级菜单显示底部导航" class="headerlink" title="10.只在一级菜单显示底部导航"></a>10.只在一级菜单显示底部导航</h4><p>在网上搜索之后发现两种方法可以解决，先说第一种：<br>在router文件夹下的index.js中将需要显示底部导航的路由中加入meta属性,在meta属性中添加一个标志属性，用来标志是否显示底部导航，这里我们用navShow来做为标志属性，如下所示：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
  component<span class="token punctuation">:</span> home<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">/*主页组件*/</span>
  meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    title<span class="token punctuation">:</span> <span class="token string">'首页'</span><span class="token punctuation">,</span>
    navShow<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">/*是否一级页面*/</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>不需要显示底部导航的设置为下面这样：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
    meta<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      title<span class="token punctuation">:</span> <span class="token string">'登陆'</span><span class="token punctuation">,</span>
      navShow<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment" spellcheck="true">/*是否一级页面*/</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> login <span class="token comment" spellcheck="true">/*登录组件*/</span>
<span class="token punctuation">}</span>
</code></pre>
<p>然后，在APP.vue中，底部导航的组件上加上判断,就完成了</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>vTab v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">"$route.meta.navShow"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>vTab<span class="token operator">></span>
</code></pre>
<p>第二种方法比较笨，在你不希望底部导航显示的组件中，直接设置css样式，让它盖在底部导航上，用户就看不到了，比如可以设置z-index属性为一个较大值。</p>
<h4 id="11-本地跨域"><a href="#11-本地跨域" class="headerlink" title="11.本地跨域"></a>11.本地跨域</h4><p>由于刚开始工作，没有什么经验，又是刚开始接触vue，虽然网上有很多文章介绍vue本地跨域，但是还是一知半解，设置了也没有成功，在纠结了好大一通后终于成了，发现哦原来这么简单，但是不明白时却觉得很难，</p>
<h4 id="12-去掉路由中的-号"><a href="#12-去掉路由中的-号" class="headerlink" title="12.去掉路由中的#号"></a>12.去掉路由中的#号</h4><p>路由中总是会带有一个#号，如<a href="http://192.168.0.144:8098/#/index" target="_blank" rel="noopener">http://192.168.0.144:8098/#/index</a><br>看起来很别扭， 要去除这个#号，可以使用路由的history模式，在router/index.js中的new VueRouter方法中添加：</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> Routes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'history'</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>这样路由就会变成<a href="http://192.168.0.144:8098/index" target="_blank" rel="noopener">http://192.168.0.144:8098/index</a></p>
<h4 id="13-iview中的upload组件上传图片到七牛云"><a href="#13-iview中的upload组件上传图片到七牛云" class="headerlink" title="13.iview中的upload组件上传图片到七牛云"></a>13.iview中的upload组件上传图片到七牛云</h4><p>项目中用到iview中的upload组件将图片上传到七牛云，比较简单，主要是uptoken在测试阶段后台没有弄好，一时不知道在哪儿搞，后来发现可以在线生成uptoken，<a href="http://pchou.qiniudn.com/qiniutool/uptoken.html" target="_blank" rel="noopener">在线地址</a>，下面写一下示例，具体的组件</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Upload</span> <span class="token attr-name">:action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Icon</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>camera<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>30<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Icon</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Upload</span><span class="token punctuation">></span></span>
</code></pre>
<pre class=" language-javascript"><code class="language-javascript">data<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">{</span>
    domain<span class="token punctuation">:</span> config<span class="token punctuation">.</span>domain<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//如下图中被马赛克掉的内容</span>
    url<span class="token punctuation">:</span> config<span class="token punctuation">.</span>qiniuUrl<span class="token punctuation">,</span>  <span class="token comment" spellcheck="true">//http://up-z2.qiniu.com/</span>
    uptoken<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>           <span class="token comment" spellcheck="true">//生成或者从后台拿到uptoken</span>
    form<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      token<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      key<span class="token punctuation">:</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><a href="http://olmhb4zos.bkt.clouddn.com/QQ%E6%88%AA%E5%9B%BE20170912174726.png" target="_blank" rel="noopener">domain</a></p>
<h4 id="14-vue中图片路径问题"><a href="#14-vue中图片路径问题" class="headerlink" title="14.vue中图片路径问题"></a>14.vue中图片路径问题</h4><p>以下两种情况会导致找不到图片路径的问题：</p>
<pre><code>1. ``` &lt;img :src=&quot;./img/a.jpg&quot; /&gt;&quot; ```
2. ``` &lt;div :style=&quot;{ backgroundImage: &#39;url(./img/a.jpg)&#39; }&quot;&gt;&lt;/div&gt; ```
</code></pre><p>可以使用下面的两种方法解决：</p>
<pre class=" language-javascript"><code class="language-javascript">data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        img<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path/to/your/source'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
在标签里使用：
<span class="token operator">&lt;</span>img <span class="token punctuation">:</span>src<span class="token operator">=</span><span class="token string">"img"</span> <span class="token operator">/</span><span class="token operator">></span>
`
</code></pre>
<p>如果是背景：</p>
<pre class=" language-javascript"><code class="language-javascript">data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        img<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path/to/your/source'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>div <span class="token punctuation">:</span>style<span class="token operator">=</span><span class="token string">"{backgroundImage: 'url(' + img + ')'}"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
</code></pre>
<h4 id="15-图片加载失败时显示默认图片"><a href="#15-图片加载失败时显示默认图片" class="headerlink" title="15.图片加载失败时显示默认图片"></a>15.图片加载失败时显示默认图片</h4><p>在使用img标签时，当图片加载失败的时候显示默认图片，这样的用户体验比较友好。<br>方法是绑定img标签的onerror，在图片加载失败时就会自动加载errorImg01的图片</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"bg"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>img <span class="token punctuation">:</span>src<span class="token operator">=</span><span class="token string">"goods.phoneFloorAd.resUrl"</span> <span class="token punctuation">:</span>onerror<span class="token operator">=</span><span class="token string">"errorImg01"</span><span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/ecmascript-6"</span><span class="token operator">></span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    data <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        errorImg01<span class="token punctuation">:</span> ‘<span class="token keyword">this</span><span class="token punctuation">.</span>src<span class="token operator">=</span><span class="token string">"‘ + require(‘assets/images/load_logo01.png‘) + ‘"</span>‘
  　　<span class="token punctuation">}</span><span class="token punctuation">;</span>
  　<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre>
<p>第二种情况是设置的背景图片加载失败时显示默认图片，方法是可以利用计算属性获取背景图片，图片获取成功时正常显示，获取失败时显示默认图片，代码如下：</p>
<h4 id="16-vue-cli打包时报错"><a href="#16-vue-cli打包时报错" class="headerlink" title="16. vue-cli打包时报错"></a>16. vue-cli打包时报错</h4><p>错误代码：vuex requires a Promise polyfill in this browser.<br>这个错误的原因是使用了es6的promise，但是ie版本(使用ie11)的浏览器不支持，解决的方法是安装 babel-polyfill ， babel-polyfill 可以模拟es6的使用环境</p>
<h5 id="1-安装-babel-polyfill"><a href="#1-安装-babel-polyfill" class="headerlink" title="1.安装 babel-polyfill"></a>1.安装 babel-polyfill</h5><pre><code>npm install  babel-polyfill
</code></pre><h5 id="2-修改webpack-base-config-js"><a href="#2-修改webpack-base-config-js" class="headerlink" title="2.修改webpack.base.config.js"></a>2.修改webpack.base.config.js</h5><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        main<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"babel-polyfill"</span><span class="token punctuation">,</span> <span class="token string">"./src/main"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//修改后</span>
        <span class="token comment" spellcheck="true">// main: './src/main',  //原来</span>
        vendors<span class="token punctuation">:</span> <span class="token string">'./src/vendors'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>参考<a href="https://www.cnblogs.com/weiqinl/p/6794612.html" target="_blank" rel="noopener">https://www.cnblogs.com/weiqinl/p/6794612.html</a></p>
</blockquote>
<h4 id="17-vue-cli打包时报错"><a href="#17-vue-cli打包时报错" class="headerlink" title="17. vue-cli打包时报错"></a>17. vue-cli打包时报错</h4><p>运行npm run dev时没有问题，但运行npm run build时报错</p>
<pre class=" language-javascript"><code class="language-javascript">Error<span class="token punctuation">:</span> <span class="token string">"extract-text-webpack-plugin"</span> loader is used without the corresponding plugin
</code></pre>
<p>是在我把vue-cli升级到@2.9.2之后出现的问题，没有找到原因，删除又安装了@2.8.2后可以打包了</p>
<h4 id="18-vscode格式化vue中template代码"><a href="#18-vscode格式化vue中template代码" class="headerlink" title="18.vscode格式化vue中template代码"></a>18.vscode格式化vue中template代码</h4><h6 id="1-安装-vetur"><a href="#1-安装-vetur" class="headerlink" title="1.安装 vetur"></a>1.安装 vetur</h6><h6 id="2-在User-Setting中增加设置"><a href="#2-在User-Setting中增加设置" class="headerlink" title="2.在User Setting中增加设置:"></a>2.在User Setting中增加设置:</h6><p><code>&quot;vetur.format.defaultFormatter.html&quot;: &quot;js-beautify-html&quot;</code></p>
<h6 id="3-格式化快捷键：Alt-Shift-F"><a href="#3-格式化快捷键：Alt-Shift-F" class="headerlink" title="3.格式化快捷键：Alt+Shift+F"></a>3.格式化快捷键：Alt+Shift+F</h6><h4 id="19-vue中通过a标签下载文件"><a href="#19-vue中通过a标签下载文件" class="headerlink" title="19.vue中通过a标签下载文件"></a>19.vue中通过a标签下载文件</h4><p>想不通过后台直接下载一个excel文件，我用了<br><code>&lt;a href=&quot;/file/filename&quot; download=&quot;filename&quot;&gt;</code><br>但是提示我找不到文件，想到img标签的src属性，是要把文件通过require引入，再通过url-loader解析一下，才能正常显示图片，所以想这个href属性是不是同样的套路，那excel文件用什么解析呢，搜索之后发现有一个file-loader，所以在webpack的配置文件里加上了下面的几行配置</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(xls)$/</span><span class="token punctuation">,</span>
  loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>在代码中只需要把这个文件require进来，在href中写上这个变量就可以了，跟img一样</p>
<pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fileHref<span class="token punctuation">"</span></span> <span class="token attr-name">download</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fileName<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
</code></pre>
<pre class=" language-javascript"><code class="language-javascript">data<span class="token punctuation">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">{</span>
    fileHref<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"/file/filename"</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>待续吧…</p>

                                                                        
                                    </div>
                                    <footer class="article-footer">
                                        <a data-url="http://sunjl729.cn/2017/07/20/vue使用时的小问题解决/" data-id="cm8cpkxiv001q7u1zabdqewoi" class="article-share-link">
                                            分享
                                        </a>
                                        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vue/">vue</a></li></ul>

                                    </footer>

    </div>

    
        
  <nav class="article-nav">
    
      <a href="/2017/08/03/vue中给列表的每一项设置定时器-倒计时/" class="article-nav-link">
        <strong class="article-nav-caption">前一篇</strong>
        <div class="article-nav-title">
          
            vue中给列表的每一项设置定时器(倒计时)
          
        </div>
      </a>
    
    
      <a href="/2017/07/15/项目中小知识点的积累/" class="article-nav-link">
        <strong class="article-nav-caption">后一篇</strong>
        <div class="article-nav-title">项目中小知识点的积累</div>
      </a>
    
  </nav>


            

                
                    
                        
                            

</article>
</section>
  <footer class="footer">
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
    <li><i class="fe fe-bookmark"></i> <span id="busuanzi_value_page_pv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2025 JL&#39;s Blog</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>
<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="JL&#39;s Blog"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Archives</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">Gallery</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">About</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      <div class="totop" id="totop">
  <i class="fe fe-rocket"></i>
</div>
    </li>
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.justifiedGallery.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>

  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/tocbot.min.js"></script>
  <script>
    // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
    tocbot.init({
      tocSelector: '.tocbot',
      contentSelector: '.article-entry',
      headingSelector: 'h1, h2, h3, h4, h5, h6',
      hasInnerContainers: true,
      scrollSmooth: true,
      positionFixedSelector: '.tocbot',
      positionFixedClass: 'is-position-fixed',
      fixedSidebarOffset: 'auto',
    });
  </script>


<script src="/js/ocean.js"></script>

</body>
</html>